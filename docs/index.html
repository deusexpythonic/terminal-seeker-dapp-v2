<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TERMINAL-SOLANA-SEEKER</title>
    <style>
        body {
            background-color: #000000;
            color: #00ff00;
            font-family: 'Courier New', Courier, monospace;
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }

        #terminal-container {
            width: 90%;
            max-width: 800px;
            height: 70%;
            max-height: 600px;
            overflow-y: auto;
            border: 2px solid #00ff00;
            padding: 15px;
            box-shadow: 0 0 10px #00ff00;
        }

        #output {
            white-space: pre-wrap;
            word-wrap: break-word;
            height: calc(100% - 30px);
            overflow-y: auto;
            margin: 0;
        }

        #input-container {
            display: flex;
            align-items: center;
        }

        #prompt {
            font-size: 1.2em;
            user-select: none;
        }

        #command-input {
            background-color: transparent;
            border: none;
            color: #00ff00;
            font-family: 'Courier New', Courier, monospace;
            font-size: 1.2em;
            flex-grow: 1;
            outline: none;
            caret-color: #00ff00;
        }
    </style>
</head>
<body>
    <div id="terminal-container">
        <pre id="output">_</pre>
        <div id="input-container">
            <span id="prompt">seekers > </span>
            <input type="text" id="command-input" autofocus>
        </div>
    </div>
    <script>
        const solanaWeb3 = {
            PublicKey: class {
                constructor(address) {
                    this.address = address;
                }
                toString() {
                    return this.address;
                }
            }
        };

        const programId = new solanaWeb3.PublicKey("3mpYuoNqF7DD1bmcmMY4BZXpH3SLytDxvrfwYZHZsjsT"); // REMPLACEZ CETTE ADRESSE PAR LA VÔTRE

        const output = document.getElementById('output');
        const commandInput = document.getElementById('command-input');
        let storyState = 0;
        let wallet;

        function appendToTerminal(text, isCommand = false) {
            if (isCommand) {
                output.textContent += `seekers > ${text}\n`;
            } else {
                output.textContent += `${text}\n`;
            }
            output.scrollTop = output.scrollHeight;
        }

        function handleCommand(command) {
            appendToTerminal(command, true);
            const lowerCommand = command.trim().toLowerCase();

            if (storyState === 0) {
                if (lowerCommand === 'start' || lowerCommand === 'commencer') {
                    appendToTerminal("Le voyage du héros commence, non par choix, mais par un appel. Un monde post-IA vous attend. Que ferez-vous ? (entrez 'accepter' ou 'refuser')");
                    storyState = 1;
                } else {
                    appendToTerminal("Tapez 'start' pour débuter la quête. Ne restez pas immobile, le monde attend d'être découvert.");
                }
            } else if (storyState === 1) {
                if (lowerCommand === 'accepter') {
                    appendToTerminal("Félicitations, Seeker. Vous avez franchi le premier seuil de l'aventure. 'Il n'y a pas de voyage vers la vérité, la vérité est le voyage.' - Alan Watts. Votre premier défi est de vous connecter. (tapez 'connect')");
                    storyState = 2;
                } else if (lowerCommand === 'refuser') {
                    appendToTerminal("Le refus de l'appel ne mène nulle part. La conscience s'éteint. Votre voyage est terminé. (tapez 'start' pour recommencer)");
                    storyState = 0;
                } else {
                    appendToTerminal("Commande invalide. (entrez 'accepter' ou 'refuser')");
                }
            } else if (storyState === 2) {
                if (lowerCommand === 'connect') {
                    appendToTerminal("Tentative de connexion au Web3...");

                    if (window.solana) {
                        try {
                            window.solana.connect();
                            wallet = window.solana;

                            setTimeout(() => {
                                appendToTerminal("Connexion au portefeuille établie. Le récit peut continuer. Tapez 'help' pour la prochaine étape.");
                                storyState = 3;
                            }, 2000);
                        } catch (error) {
                            appendToTerminal(`Erreur de connexion : ${error.message}. Réessayez.`);
                            console.error(error);
                        }
                    } else {
                        appendToTerminal("Aucun portefeuille Solana détecté. Veuillez installer un portefeuille comme Phantom ou Solflare et rafraîchir la page.");
                        storyState = 0;
                    }
                } else {
                    appendToTerminal("Commande invalide. Tapez 'connect' pour continuer.");
                }
            } else if (storyState === 3) {
                if (lowerCommand === 'help') {
                    appendToTerminal("Voici vos options Seeker : 'status', 'progress', 'origine' et 'quit'.");
                } else if (lowerCommand === 'status') {
                    appendToTerminal("État du Seeker : Actif. Prêt pour l'aventure.");
                    if (wallet) {
                        appendToTerminal(`Adresse du portefeuille : ${wallet.publicKey.toString()}`);
                    }
                } else if (lowerCommand === 'progress') {
                    appendToTerminal("Progression dans le Monomythe : Vous êtes au début du voyage du héros.");
                } else if (lowerCommand === 'origine') {
                    appendToTerminal("Tentative de contact avec l'Origine...");

                    appendToTerminal(`Connexion au programme vérifiée: ${programId.toString()}.`);
                    appendToTerminal("Contact établi. Le récit peut continuer.");
                } else if (lowerCommand === 'quit') {
                    appendToTerminal("Merci d'avoir joué. Le terminal s'éteint... (tapez 'start' pour revenir)");
                    storyState = 0;
                } else {
                    appendToTerminal("Commande invalide. Tapez 'help' pour voir les commandes disponibles.");
                }
            }

            commandInput.value = '';
        }

        commandInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                handleCommand(commandInput.value);
            }
        });

        appendToTerminal("Bienvenue, Seeker. L'univers post-IA est silencieux. Il n'y a que le terminal. Tapez 'start' pour commencer votre voyage.");
    </script>
</body>
</html>
